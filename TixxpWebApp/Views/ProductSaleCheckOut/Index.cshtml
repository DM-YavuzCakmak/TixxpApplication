@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Ürü";
}

<div class="page">
    <!-- Start::app-content -->
    <div class="main-content app-content">
        <div class="container-fluid">

            <!-- Page Header -->
            <div class="d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb text-fixed-white">
                <h1 class="page-title fw-medium fs-18 mb-0 text-fixed-white">Fatura Bilgileri</h1>
                <div class="ms-md-1 ms-0">
                    <nav>
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item text-fixed-white"><a href="javascript:void(0);" class="text-fixed-white">Satış</a></li>
                            <li class="breadcrumb-item active text-fixed-white" aria-current="page">Ürün Satışı</li>
                        </ol>
                    </nav>
                </div>
            </div>
            <!-- Page Header Close -->
            <!-- Start::row-1 -->
            <div class="row">
                <div class="col-xl-12">
                    <div class="card custom-card">
                        <div class="card-body p-0 product-checkout">
                            <ul class="nav nav-tabs tab-style-2 d-sm-flex d-block border-bottom border-block-end-dashed" id="myTab1" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="order-tab" data-bs-toggle="tab"
                                            data-bs-target="#order-tab-pane" type="button" role="tab"
                                            aria-controls="order-tab" aria-selected="true">
                                        <i class="ri-truck-line me-2 align-middle"></i>Fatura Türü
                                    </button>
                                </li>

                               @*  <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="confirmed-tab" data-bs-toggle="tab"
                                            data-bs-target="#confirm-tab-pane" type="button" role="tab"
                                            aria-controls="confirmed-tab" aria-selected="false">
                                        <i class="ri-user-3-line me-2 align-middle"></i>Personal Details
                                    </button>
                                </li> *@

                             @*    <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="shipped-tab" data-bs-toggle="tab"
                                            data-bs-target="#shipped-tab-pane" type="button" role="tab"
                                            aria-controls="shipped-tab" aria-selected="false">
                                        <i class="ri-bank-card-line me-2 align-middle"></i>Payment
                                    </button>
                                </li> *@
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="order-summary" data-bs-toggle="tab"
                                            data-bs-target="#order-summary-pane" type="button" role="tab"
                                            aria-controls="order-summary" aria-selected="false">
                                        <i class="ri-bank-card-line me-2 align-middle"></i>Order Summary
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="delivered-tab" data-bs-toggle="tab"
                                            data-bs-target="#delivery-tab-pane" type="button" role="tab"
                                            aria-controls="delivered-tab" aria-selected="false">
                                        <i class="ri-checkbox-circle-line me-2 align-middle"></i>Confirmation
                                    </button>
                                </li>
                            </ul>
                            <div class="tab-content" id="myTabContent">
                           @*      <div class="tab-pane fade border-0 p-0" id="confirm-tab-pane"
                                     role="tabpanel" aria-labelledby="confirm-tab-pane" tabindex="0">
                                    <div class="p-4">
                                        <p class="mb-1 fw-medium text-muted op-5 fs-20">02</p>
                                        <div class="fs-15 fw-medium d-sm-flex d-block align-items-center justify-content-between mb-3">
                                            <div>Personal Details :</div>
                                        </div>
                                        <div class="row gy-4">
                                            <div class="col-xl-6">
                                                <label for="firstname-personal" class="form-label">First Name</label>
                                                <input type="text" class="form-control" id="firstname-personal" placeholder="First Name" value="Json">
                                            </div>
                                            <div class="col-xl-6">
                                                <label for="lastname-personal" class="form-label">Last Name</label>
                                                <input type="text" class="form-control" id="lastname-personal" placeholder="Last Name" value="Taylor">
                                            </div>
                                            <div class="col-xl-6">
                                                <label for="email-personal" class="form-label">Email</label>
                                                <input type="email" class="form-control" id="email-personal" placeholder="xyz@example.com" value="">
                                            </div>
                                            <div class="col-xl-6">
                                                <label for="phoneno-personal" class="form-label">Phone no</label>
                                                <input type="text" class="form-control" id="phoneno-personal" placeholder="(555)-555-1234" value="">
                                            </div>
                                            <div class="col-xxl-2">
                                                <label for="pincode-personal" class="form-label">Pincode</label>
                                                <input type="text" class="form-control" id="pincode-personal" placeholder="200017" value="">
                                            </div>
                                            <div class="col-xxl-4">
                                                <label for="choices-single-default" class="form-label">City</label>
                                                <select class="form-control" data-trigger name="choices-single-default" id="choices-single-default">
                                                    <option value="Choice 1">Georgetown</option>
                                                    <option value="Choice 2">Alexandria</option>
                                                    <option value="Choice 3">Rockville</option>
                                                    <option value="Choice 4">Frederick</option>
                                                </select>
                                            </div>
                                            <div class="col-xxl-4">
                                                <label for="choices-single-default1" class="form-label">State</label>
                                                <select class="form-control" data-trigger id="choices-single-default1">
                                                    <option value="Choice 1">Washington,D.C</option>
                                                    <option value="Choice 2">California</option>
                                                    <option value="Choice 3">Texas</option>
                                                    <option value="Choice 4">Alaska</option>
                                                </select>
                                            </div>
                                            <div class="col-xxl-2">
                                                <label for="country-personal" class="form-label">Country</label>
                                                <input type="text" class="form-control" id="country-personal" placeholder="Country" value="USA">
                                            </div>
                                            <div class="col-xl-12">
                                                <label for="text-area" class="form-label">Address</label>
                                                <textarea class="form-control" id="text-area" rows="4"></textarea>
                                                <div class="form-check mt-1">
                                                    <input class="form-check-input form-checked-outline form-checked-success" type="checkbox" value="" id="invalidCheck1" required checked>
                                                    <label class="form-check-label text-success fs-12" for="invalidCheck1">
                                                        Same as Shipping Address Address ?
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-between">
                                        <button type="button" class="btn btn-danger-light m-1" id="back-shipping-trigger"><i class="ri-truck-line me-2 align-middle d-inline-block"></i>Back To Shipping</button>
                                        <button type="button" class="btn btn-success-light m-1" id="payment-trigger">Continue To Payment<i class="bi bi-credit-card-2-front align-middle ms-2 d-inline-block"></i></button>
                                    </div>
                                </div> *@
                                <div class="tab-pane fade show active border-0 p-0" id="order-tab-pane" role="tabpanel"
                                     aria-labelledby="order-tab-pane" tabindex="0">
                                    <div class="p-4">
                                        @* <p class="mb-1 fw-medium text-muted op-5 fs-20">01</p> *@
                                        <div class="fs-15 fw-medium d-sm-flex d-block align-items-center justify-content-between mb-3">
                                            <div class="mt-sm-0 mt-2">
                                                @* <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal-new-address"><i class="ri-add-line me-1 align-middle fs-16 fw-medium d-inline-block"></i>Add New Address</button> *@
                                                <div class="modal fade" id="modal-new-address" tabindex="-1" aria-labelledby="modal-new-address" aria-hidden="true">
                                                    <div class="modal-dialog modal-lg modal-dialog-centered">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h6 class="modal-title" id="staticBackdropLabel">
                                                                    New Address
                                                                </h6>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="row gy-3">
                                                                    <div class="col-xl-6">
                                                                        <label for="fullname-new" class="form-label">Full Name</label>
                                                                        <input type="text" class="form-control" id="fullname-new" placeholder="Full Name">
                                                                    </div>
                                                                    <div class="col-xl-6">
                                                                        <label for="email-new" class="form-label">Email</label>
                                                                        <input type="email" class="form-control" id="email-new" placeholder="email">
                                                                    </div>
                                                                    <div class="col-xl-6">
                                                                        <label for="phonenumber-new" class="form-label">Phone Number</label>
                                                                        <input type="number" class="form-control" id="phonenumber-new" placeholder="Phone">
                                                                    </div>
                                                                    <div class="col-xl-6">
                                                                        <label for="address-new" class="form-label">Address</label>
                                                                        <input type="text" class="form-control" id="address-new" placeholder="Address">
                                                                    </div>
                                                                    <div class="col-xl-12">
                                                                        <div class="row">
                                                                            <div class="col-xl-3">
                                                                                <label for="pincode-new" class="form-label">Pincode</label>
                                                                                <input type="number" class="form-control" id="pincode-new" placeholder="Pinicode">
                                                                            </div>
                                                                            <div class="col-xl-3">
                                                                                <label for="city-new" class="form-label">City</label>
                                                                                <input type="text" class="form-control" id="city-new" placeholder="City">
                                                                            </div>
                                                                            <div class="col-xl-3">
                                                                                <label for="state-new" class="form-label">State</label>
                                                                                <input type="text" class="form-control" id="state-new" placeholder="State">
                                                                            </div>
                                                                            <div class="col-xl-3">
                                                                                <label for="country-new" class="form-label">Country</label>
                                                                                <input type="text" class="form-control" id="country-new" placeholder="Country">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                                                <button type="button" class="btn btn-success">
                                                                    Save
                                                                    Address
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row gy-4 mb-4">
                                            <!-- Invoice Type Dropdown -->
                                            <div class="col-xl-4">
                                                <label for="invoiceType" class="form-label">Fatura Türü</label>
                                                <select class="form-select" id="invoiceType">
                                                    <option value="">Lütfen Fatura Türü Seçiniz</option>
                                                    @foreach (var item in ViewBag.InvoiceTypes as List<Tixxp.Entities.InvoiceType.InvoiceTypeEntity>)
                                                    {
                                                        <option value="@item.Id">@item.Name</option>
                                                    }
                                                </select>
                                            </div>

                                            <!-- Common for Şahıs + Firma -->
                                            <div class="col-xl-4 d-none" id="nationalIdGroup">
                                                <label for="nationalId" class="form-label">T.C. Kimlik No</label>
                                                <input type="text" class="form-control" id="nationalId" placeholder="T.C. Kimlik No" />
                                            </div>

                                            <!-- Firma-specific fields -->
                                            <div class="col-xl-4 d-none" id="companyNameGroup">
                                                <label for="companyName" class="form-label">Firma Adı</label>
                                                <input type="text" class="form-control" id="companyName" placeholder="Firma Adı" />
                                            </div>

                                            <div class="col-xl-4 d-none" id="taxNumberGroup">
                                                <label for="taxNumber" class="form-label">Vergi Numarası</label>
                                                <input type="text" class="form-control" id="taxNumber" placeholder="Vergi No" />
                                            </div>

                                            <div class="col-xl-4 d-none" id="taxOfficeGroup">
                                                <label for="taxOffice" class="form-label">Vergi Dairesi</label>
                                                <input type="text" class="form-control" id="taxOffice" placeholder="Vergi Dairesi" />
                                            </div>

                                            <!-- Country, City, Province - Common for Firma + Şahıs -->
                                            <div class="col-xl-4 d-none" id="countryGroup">
                                                <label for="country" class="form-label">Ülke</label>
                                                <select class="form-select" id="country">
                                                    <option value="">Seçiniz</option>
                                                    <option value="TR">Türkiye</option>
                                                    <option value="US">ABD</option>
                                                </select>
                                            </div>

                                            <div class="col-xl-4 d-none" id="cityGroup">
                                                <label for="city" class="form-label">Şehir</label>
                                                <select class="form-select" id="city">
                                                    <option value="">Seçiniz</option>
                                                    <option value="İstanbul">İstanbul</option>
                                                    <option value="Ankara">Ankara</option>
                                                </select>
                                            </div>

                                            <div class="col-xl-4 d-none" id="provinceGroup">
                                                <label for="province" class="form-label">İlçe</label>
                                                <select class="form-select" id="province">
                                                    <option value="">Seçiniz</option>
                                                    <option value="Kadıköy">Kadıköy</option>
                                                    <option value="Çankaya">Çankaya</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-end">
                                        <button type="button" class="btn btn-success-light d-none" id="personal-details-trigger">
                                            Personal Details<i class="ri-user-3-line ms-2 align-middle d-inline-block"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="tab-pane fade border-0 p-0" id="shipped-tab-pane" role="tabpanel"
                                     aria-labelledby="shipped-tab-pane" tabindex="0">
                                    <div class="p-4">
                                        <p class="mb-1 fw-medium text-muted op-5 fs-20">03</p>
                                        <div class="fs-15 fw-medium d-sm-flex d-block align-items-center justify-content-between mb-3">
                                            <div>Payment Details :</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="mb-3">
                                                    <label class="form-label">Delivery Address</label>
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" placeholder="Address" aria-label="address" aria-describedby="payment-address" value="MIG-1-11,Monroe Street,Washington D.C,USA">
                                                        <button type="button" class="btn btn-info-light input-group-text" id="payment-address">Change</button>
                                                    </div>
                                                </div>
                                                <div class="card custom-card border shadow-none mb-3">
                                                    <div class="card-header">
                                                        <div class="card-title">
                                                            Payment Methods
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="btn-group mb-3 d-sm-flex d-block" role="group" aria-label="Basic radio toggle button group">
                                                            <input type="radio" class="btn-check" name="btnradio" id="btnradio1">
                                                            <label class="btn btn-outline-light text-default mt-sm-0 mt-1" for="btnradio1">C.O.D(Cash on delivery)</label>
                                                            <input type="radio" class="btn-check" name="btnradio" id="btnradio2">
                                                            <label class="btn btn-outline-light text-default mt-sm-0 mt-1" for="btnradio2">UPI</label>
                                                            <input type="radio" class="btn-check" name="btnradio" id="btnradio3" checked>
                                                            <label class="btn btn-outline-light text-default mt-sm-0 mt-1" for="btnradio3">Credit/Debit Card</label>
                                                        </div>
                                                        <div class="row gy-3">
                                                            <div class="col-xl-12">
                                                                <label for="payment-card-number" class="form-label">Card Number</label>
                                                                <input type="text" class="form-control" id="payment-card-number" placeholder="Card Number" value="1245 - 5447 - 8934 - XXXX">
                                                            </div>
                                                            <div class="col-xl-12">
                                                                <label for="payment-card-name" class="form-label">Name On Card</label>
                                                                <input type="text" class="form-control" id="payment-card-name" placeholder="Name On Card" value="JSON TAYLOR">
                                                            </div>
                                                            <div class="col-xl-4">
                                                                <label for="payment-cardexpiry-date" class="form-label">Expiration Date</label>
                                                                <input type="text" class="form-control" id="payment-cardexpiry-date" placeholder="MM/YY" value="08/2024">
                                                            </div>
                                                            <div class="col-xl-4">
                                                                <label for="payment-cvv" class="form-label">CVV</label>
                                                                <input type="text" class="form-control" id="payment-cvv" placeholder="XXX" value="341">
                                                            </div>
                                                            <div class="col-xl-4">
                                                                <label for="payment-security" class="form-label">O.T.P</label>
                                                                <input type="text" class="form-control" id="payment-security" placeholder="XXXXXX" value="183467">
                                                                <label for="payment-security" class="form-label mt-1 text-success fs-11"><sup><i class="ri-star-s-fill"></i></sup>Do not share O.T.P with anyone</label>
                                                            </div>
                                                            <div class="col-xl-12">
                                                                <div class="form-check">
                                                                    <input class="form-check-input form-checked-success" type="checkbox" value="" id="payment-card-save" checked>
                                                                    <label class="form-check-label" for="payment-card-save">
                                                                        Save this card
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer">
                                                        <div class="row gy-3">
                                                            <p class="fs-15 fw-medium mb-1">Saved Cards :</p>
                                                            <div class="col-xl-6">
                                                                <div class="form-check payment-card-container mb-0 lh-1">
                                                                    <input id="payment-card1" name="payment-cards" type="radio" class="form-check-input" checked>
                                                                    <div class="form-check-label">
                                                                        <div class="d-sm-flex d-block align-items-center justify-content-between">
                                                                            <div class="me-2 lh-1">
                                                                                <span class="avatar avatar-md">
                                                                                    <img src="../assets/images/ecommerce/png/7.png" alt="">
                                                                                </span>
                                                                            </div>
                                                                            <div class="saved-card-details">
                                                                                <p class="mb-0 fw-medium">XXXX - XXXX - XXXX - 7646</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="form-check payment-card-container mb-0 lh-1">
                                                                    <input id="payment-card2" name="payment-cards" type="radio" class="form-check-input">
                                                                    <div class="form-check-label">
                                                                        <div class="d-sm-flex d-block align-items-center justify-content-between">
                                                                            <div class="me-2 lh-1">
                                                                                <span class="avatar avatar-md">
                                                                                    <img src="../assets/images/ecommerce/png/8.png" alt="">
                                                                                </span>
                                                                            </div>
                                                                            <div class="saved-card-details">
                                                                                <p class="mb-0 fw-medium">XXXX - XXXX - XXXX - 9556</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-between">
                                        <button type="button" class="btn btn-danger-light m-1" id="back-personal-trigger"><i class="ri-user-3-line me-2 align-middle d-inline-block"></i>Back To Personal Info</button>
                                        <button type="button" class="btn btn-success-light m-1" id="continue-payment-trigger">Continue Payment<i class="bi bi-credit-card-2-front align-middle ms-2 d-inline-block"></i></button>
                                    </div>
                                </div>

                                <div class="tab-pane fade border-0 p-0" id="order-summary-pane" role="tabpanel"
                                     aria-labelledby="order-summary-pane" tabindex="0">
                                    <div class="p-4">
                                        @* <p class="mb-1 fw-medium text-muted op-5 fs-20">04</p> *@
                                        <div class="fs-15 fw-medium d-sm-flex d-block align-items-center justify-content-between mb-3">
                                            <div>Sipariş Özeti :</div>
                                        </div>
                                        <div class="row justify-content-center">
                                            <div class="col-xl-6">
                                                <div class="card custom-card border">
                                                    <div class="card-header">
                                                        <div class="card-title me-1">Sipariş Özeti</div><span class="badge bg-info-transparent rounded-pill">03</span>
                                                    </div>
                                                    <div class="card-body p-0">
                                                        <ul class="list-group mb-0 border-0 rounded-0">
                                                            <li class="list-group-item border-top-0 border-start-0 border-end-0">
                                                                <div class="d-flex align-items-center flex-wrap">
                                                                    <div class="me-2">
                                                                        <span class="avatar avatar-lg bg-light">
                                                                            <img src="../assets/images/ecommerce/jpg/2.jpg" alt="">
                                                                        </span>
                                                                    </div>
                                                                    <div class="flex-fill">
                                                                        <p class="mb-0 fw-medium">Blue sweatshirt</p>
                                                                        <p class="mb-0 text-muted fs-12">Quantity : 2  <span class="badge bg-primary-transparent ms-3">Free Delivery</span></p>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0 text-end">
                                                                            <a aria-label="anchor" href="javascript:void(0)">
                                                                                <i class="ri-close-line fs-16 text-muted"></i>
                                                                            </a>
                                                                        </p>
                                                                        <p class="mb-0 fs-16 fw-medium">$189<span class="ms-1 text-muted fs-11 d-inline-block"><s>$329</s></span></p>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item border-top-0 border-start-0 border-end-0">
                                                                <div class="d-flex align-items-center flex-wrap">
                                                                    <div class="me-2">
                                                                        <span class="avatar avatar-lg bg-light">
                                                                            <img src="../assets/images/ecommerce/jpg/6.jpg" alt="">
                                                                        </span>
                                                                    </div>
                                                                    <div class="flex-fill">
                                                                        <p class="mb-0 fw-medium">Blue sweatshirt</p>
                                                                        <p class="mb-0 text-muted fs-12">Quantity : 2  <span class="badge bg-success-transparent ms-3">30% Off</span></p>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0 text-end">
                                                                            <a aria-label="anchor" href="javascript:void(0)">
                                                                                <i class="ri-close-line fs-16 text-muted"></i>
                                                                            </a>
                                                                        </p>
                                                                        <p class="mb-0 fs-16 fw-medium">$189<span class="ms-1 text-muted fs-11 d-inline-block"><s>$329</s></span></p>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item  border-bottom border-block-end-dashed border-start-0 border-end-0">
                                                                <div class="d-flex align-items-center flex-wrap">
                                                                    <div class="me-2">
                                                                        <span class="avatar avatar-lg bg-light">
                                                                            <img src="../assets/images/ecommerce/jpg/8.jpg" alt="">
                                                                        </span>
                                                                    </div>
                                                                    <div class="flex-fill">
                                                                        <p class="mb-0 fw-medium">Denim Jacket</p>
                                                                        <p class="mb-0 text-muted fs-12">Quantity : 1  <span class="badge bg-success-transparent ms-3">10% Off</span></p>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0 text-end">
                                                                            <a aria-label="anchor" href="javascript:void(0)">
                                                                                <i class="ri-close-line fs-16 text-muted"></i>
                                                                            </a>
                                                                        </p>
                                                                        <p class="mb-0 fs-16 fw-medium">$129<span class="ms-1 text-muted fs-11 d-inline-block"><s>$139</s></span></p>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        <div class="p-3 border-bottom border-block-end-dashed">
                                                            <div class="d-flex align-items-center justify-content-between flex-wrap">
                                                                <div class="fs-12 fw-medium bg-primary-transparent p-1 rounded">SPRUKO25</div>
                                                                <div class="text-success">COUPON APPLIED</div>
                                                            </div>
                                                        </div>
                                                        <div class="p-3 border-bottom border-block-end-dashed">
                                                            <div class="d-flex align-items-center justify-content-between mb-3">
                                                                <div class="text-muted">Sub Total</div>
                                                                <div class="fw-medium fs-14">$318</div>
                                                            </div>
                                                            <div class="d-flex align-items-center justify-content-between mb-3">
                                                                <div class="text-muted">Discount</div>
                                                                <div class="fw-medium fs-14 text-success">10% @* - $31.8> *@</div>
                                                            </div>
                                                            <div class="d-flex align-items-center justify-content-between mb-3">
                                                                <div class="text-muted">Delivery Charges</div>
                                                                <div class="fw-medium fs-14 text-danger">- $29</div>
                                                            </div>
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div class="text-muted">Service Tax (18%)</div>
                                                                <div class="fw-medium fs-14">- $45.29</div>
                                                            </div>
                                                        </div>
                                                        <div class="p-3">
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div class="fs-15">Total :</div>
                                                                <div class="fw-medium fs-18 text-dark"> $1,387</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-between">
                                        <button type="button" class="btn btn-danger-light m-1" id="back-personal-trigger"><i class="ri-user-3-line me-2 align-middle d-inline-block"></i>Back To Personal Info</button>
                                        <button type="button" class="btn btn-success-light m-1" id="continue-payment-trigger">Continue Payment<i class="bi bi-credit-card-2-front align-middle ms-2 d-inline-block"></i></button>
                                    </div>
                                </div>

                                <div class="tab-pane fade border-0 p-0" id="delivery-tab-pane" role="tabpanel"
                                     aria-labelledby="delivery-tab-pane" tabindex="0">
                                    <div class="p-5 checkout-payment-success my-3">
                                        <div class="mb-5">
                                            <h5 class="text-success fw-medium">Payment Successful...&#129309;</h5>
                                        </div>
                                        <div class="mb-5">
                                            <img src="../assets/images/ecommerce/png/6.png" alt="" class="img-fluid">
                                        </div>
                                        <div class="mb-4">
                                            <p class="mb-1 fs-14">You can track your order with Order Id <b>SPK#1FR</b> from <a class="link-success" href="javascript:void(0);"><u>Track Order</u></a></p>
                                            <p class="text-muted">Thankyou for shopping with us.</p>
                                        </div>
                                        <a href="products.html" class="btn btn-success">Continue Shopping<i class="bi bi-cart ms-2"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--End::row-1 -->
        </div>
    </div>
    <!-- End::app-content -->
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const invoiceTypeSelect = document.getElementById("invoiceType");
            const personalBtn = document.getElementById("personal-details-trigger");

            const nationalId = document.getElementById("nationalId");
            const companyName = document.getElementById("companyName");
            const taxNumber = document.getElementById("taxNumber");
            const taxOffice = document.getElementById("taxOffice");
            const country = document.getElementById("country");
            const city = document.getElementById("city");
            const province = document.getElementById("province");

            const nationalIdGroup = document.getElementById("nationalIdGroup");
            const companyNameGroup = document.getElementById("companyNameGroup");
            const taxNumberGroup = document.getElementById("taxNumberGroup");
            const taxOfficeGroup = document.getElementById("taxOfficeGroup");
            const countryGroup = document.getElementById("countryGroup");
            const cityGroup = document.getElementById("cityGroup");
            const provinceGroup = document.getElementById("provinceGroup");

            function show(...elements) {
                elements.forEach(el => el.classList.remove("d-none"));
            }

            function hide(...elements) {
                elements.forEach(el => el.classList.add("d-none"));
            }

            function isFilled(el) {
                return el && el.value.trim() !== "";
            }

            function isCurrentStepValid() {
                const selectedText = invoiceTypeSelect.options[invoiceTypeSelect.selectedIndex].textContent;
                if (selectedText.includes("Firma")) {
                    return (
                        isFilled(nationalId) &&
                        isFilled(companyName) &&
                        isFilled(taxNumber) &&
                        isFilled(taxOffice) &&
                        isFilled(country) &&
                        isFilled(city) &&
                        isFilled(province)
                    );
                } else if (selectedText.includes("Şahıs")) {
                    return (
                        isFilled(nationalId) &&
                        isFilled(country) &&
                        isFilled(city) &&
                        isFilled(province)
                    );
                } else if (selectedText.includes("Fiş") || selectedText.includes("Nihai")) {
                    return true;
                }
                return false;
            }

            function updateVisibility() {
                const selectedText = invoiceTypeSelect.options[invoiceTypeSelect.selectedIndex].textContent;
                hide(nationalIdGroup, companyNameGroup, taxNumberGroup, taxOfficeGroup, countryGroup, cityGroup, provinceGroup);
                personalBtn.classList.add("d-none");

                if (selectedText.includes("Firma")) {
                    show(nationalIdGroup, companyNameGroup, taxNumberGroup, taxOfficeGroup, countryGroup, cityGroup, provinceGroup);
                } else if (selectedText.includes("Şahıs")) {
                    show(nationalIdGroup, countryGroup, cityGroup, provinceGroup);
                }

                if (isCurrentStepValid()) {
                    personalBtn.classList.remove("d-none");
                    personalBtn.innerHTML = 'Sipariş Özeti<i class="ri-user-3-line ms-2 align-middle d-inline-block"></i>';

                }
            }

            invoiceTypeSelect.addEventListener("change", updateVisibility);
            [nationalId, companyName, taxNumber, taxOffice, country, city, province].forEach(el =>
                el.addEventListener("input", updateVisibility)
            );

            updateVisibility();

            personalBtn.addEventListener("click", function () {
                const nextTab = document.querySelector('#confirmed-tab');
                new bootstrap.Tab(nextTab).show();
            });
        });
    </script>
}

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    async function postInvoiceInfo(productSaleId) {
          const model = {
        ProductSaleId: Number(productSaleId), // 👈 string yerine number
        InvoiceTypeId: Number(document.getElementById("invoiceType").value),
        IdentityNumber: document.getElementById("nationalId").value,
        CompanyName: document.getElementById("companyName").value,
        TaxNumber: document.getElementById("taxNumber").value,
        TaxOffice: document.getElementById("taxOffice").value,
        CountyId: document.getElementById("province").value
            ? Number(document.getElementById("province").value)
            : null // 👈 boşsa null gönder
    };

            console.log("Gönderilen JSON:", JSON.stringify(model));

        const response = await fetch('/ProductSaleCheckOut/AddInvoiceInfo', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(model)
        });

        if (response.ok) {
            const result = await response.json();
            if (result.isSuccess) {
                Swal.fire({
                    toast: true,
                    position: 'top-end',
                    icon: 'success',
                    title: 'Fatura bilgileri başarılı bir şekilde kaydedildi.',
                    showConfirmButton: false,
                    timer: 3000
                });

                setTimeout(() => {
                    const nextTab = document.querySelector('#shipped-tab');
                    new bootstrap.Tab(nextTab).show();
                }, 500);
            } else {
                Swal.fire("Hata", result.message, "error");
            }
        } else {
            Swal.fire("İstek başarısız", "Sunucuya ulaşılamadı.", "error");
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        const personalBtn = document.getElementById("personal-details-trigger");
        const productSaleId = new URLSearchParams(window.location.search).get("productSaleId");

        personalBtn.addEventListener("click", function () {
            if (productSaleId)
                postInvoiceInfo(productSaleId);
            else
                Swal.fire("Hata", "Satış bilgisi bulunamadı.", "error");
        });
    });
</script>




